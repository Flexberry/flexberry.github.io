---
title: Ограничение прав на атрибуты
sidebar: ember-flexberry-security_sidebar
keywords: Flexberry Security
toc: true
permalink: ru/efs_check-access-to-attribute.html
lang: ru
---

> CheckAccessToAttribute отсутствует в ORM начиная с версии 8.0.

# Права на атрибуты
Flexberry Platform поддерживает настройку прав на свойства объектов данных (атрибут). Настройка этого вида прав производится через указание специального выражения в атрибуте DataServiceExpression. Выражение имеет вид следующий вид:

```cs
/*Operation:ИмяОперации;DeniedAccessValue:ЗначениеАтрибутаПриОтсутствииПрав*/
```


Наличие прав у пользователя на атрибут определяется наличием прав на указанную в выражении операции (раздел Operation). При отсутствии прав на операцию свойство получит значение, указанное в разделе DeniedAccessValue. Если выражение не задано, значение объекта обрабатывается обычным образом. Настройки прав на мастеровые свойства имеет свою специфику (см. соответствующий раздел).


# Порядок установки контроля прав на атрибуты
1. В консоли полномочий необходимо создать операции и настроить доступ пользователей к ним.

2. В Flexberry Tool добавить или отредактировать DataServiceExpression, добавив в него выражение настройки прав на атрибуты.
Значение DeniedAccessValue должно быть записано так, как оно болжно быть записали в запросе SQL. В примере строковое – значит в одинарных кавычках. Если DeniedAccessValue уже есть, записываем рядом, для SQL server это комментарий.

3. При запуске приложения устанвить свойство RightManager.UseRightsOnAttribute = true. В web-приложении это можно сделать в Global.Application_Start.

4. В случае если настраиваемое свойство является вычислимым и имеет определенный к коде get'ер необходимо, чтобы в этом коде также учитывались права на атрибут. Если DataServiceExpression с ограничением на права был добавлен через Flexberry Tool, но необходимый код в get'ер будет добавлен автоматически.

```cs
object deniedAccessValue;
if (!Information.CheckAccessToAttribute(this.GetType(), "Название", out deniedAccessValue))
return (string)deniedAccessValue; // CheckAccessToAttribute отсутствует в ORM начиная с версии 8.0.
```


# Права на мастеровые свойстваПри настройке прав на атрибуты, являющиеся ссылками на мастера, в качестве значения DeniedAccessValue необходимо указать ключ мастера, который будет присвоен свойству при отсутствии прав. Для таких целей рекомендуется завести специальный фиктивный мастер.
```cs
[DataServiceExpression(typeof(ICSSoft.STORMNET.Business.MSSQLDataService), "/*Operation:ПросмотрАтрибутов;DeniedAccessValue:'00000000-0000-0000-0000-000000000000'*/")]
```
