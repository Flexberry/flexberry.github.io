--- 
title: SQL queries in Flexberry 
sidebar: flexberry-orm_sidebar 
keywords: Flexberry ORM, data service, database, queries, constraints, ADO.NET 
summary: describes how to work with databases and how database access 
toc: true 
permalink: en/fo_sql-query.html 
lang: en 
autotranslated: true 
hash: 49a9a42e8a6117bc6ac979b1fbe587b91357882e9b09da6f7f954172a20ee287 
--- 

## access to the database 

Technology Flexberry the following methods access the database: 

* [Service data](fo_data-service.html). To read data you can use as an 
* [Parental control](fo_limit-function.html), 
* and [LINQProvider](fo_linq-provider.html)). 
* ADO.NET. Allows you to execute SQL queries from the code. 

__Note__: ADO.NET `НЕ ИСПОЛЬЗУЕТСЯ` in projects in cases when you can do without it. Even if there is an urgent need to use ADO.NET one should check whether it is possible to do without it. Perhaps the use [funcSQL](fo_func-sql.html). 

If to speak about the applicability of possible methods of reading data: ADO.NET - use __only__ in cases where not enough features of the data service. 

### a request in the service data 

What constitutes the text of the SQL query generated by the [service data](fo_data-service.html): 

* Settings [LoadingCustomizationStruct](fo_loading-customization-struct.html) (work on sorting, overlay [limitFunction](fo_limit-function.html), podjeto aggregating values and other similar actions you need to offload to the server by setting parameters `LoadingCustomizationStruct`. 
* Attribute markup (e.g. attribute `Storage` as classes and relations). 
* [Inheritance](fd_inheritance.html) using [a typeusage](fo_type-usage-problem.html). 
* [The interception of the query to the database](fo_intercept-formation-sql-query.html). 

If you look at what requests sends the service data to the server, then there are constants of type `StormMainObjectKey` and `STORMJoinedMasterKey`. 

* ``StormMainObjectKey`` - [primary key](fo_primary-keys-objects.html) (primarykey) of the object being read from the database. Constant `StormMainObjectKey` defined as `ICSSoft.STORMNET.FunctionalLanguage.SQLWhere.SQLWhereLanguageDef.StormMainObjectKey`. 
* ``STORMJoinedMasterKey``. The organization of the proofreading of the database foreign keys are given names according to the type `STORMJoinedMasterKey1`. PstrfSTORMJoinedMasterKey` to use when constructing constraints in code __not recommended__, because their order may change. 

### ADO.NET 

Below is an example of execution of SQL queries through technology ADO.Net: 

``` csharp
public virtual decimal СуммаОплаченныхПокупок
{
	get
	{
		var connection = (SqlConnection)((SQLDataService)DataServiceProvider.DataService).GetConnection(); //get connection 
		var command = new SqlCommand("SELECT SUM(purchase.\"Amount\") "+
			"FROM \"Customer\" customer join \"Purchase\" purchase on customer.\"primaryKey\" = purchase.\"Buyer\" "+
			"WHERE purchase.\"Buyer\"=@Customer AND purchase.\"Status\" = \'Paid\' ", connection); //make a request 
		var parameter = new SqlParameter("@Customer", SqlDbType.UniqueIdentifier);
		parameter.Value = ((KeyGuid)this.__PrimaryKey).Guid; //define parameter values 
		command.Parameters.Add(parameter);
		
		try
		{
			connection.Open();
			var value = (decimal)command.ExecuteScalar(); //execution of query 
		}
		finally
		{
			connection.Close();
		}
		
		return value;
	}
	//... 
}
``` 



