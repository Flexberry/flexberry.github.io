---
title: Валидация данных
sidebar: flexberry-winforms_sidebar
keywords: Flexberry Designer, Flexberry Winforms
summary: Для windows-приложений перечислены уровни проверки данных (во время редактирования, при сохранении на форме, в бизнес-серверах), приведена их сравнительная характеристика, даны ссылки на статьи, описывающие как реализовать указанные урови проверки
toc: true
permalink: en/fw_edit-form-validation.html
lang: en
---

Валидация данных происходит в несколько этапов.

`Web`:
* Во-первых, нужны по-максимуму клиентские валидаторы (jQuery). Эти валидаторы должны блокировать отправку формы на сервер, если что-то не заполнено или заполнено неправильно (так мы снижаем нагрузку на сервер и увеличиваем отзывчивость и интерактивность приложения). Если это простой `required`, то можно использовать [ASP.NET-валидатор](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator%28v=vs.100%29.aspx) с включенным клиентским обработчиком – тогда jQuery-валидаторы не нужны. Главное правильно указать [`ValidationGroup`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.validationgroup%28v=vs.100%29.aspx). 

* После клиентских валидаторов нужно использовать серверные и разместить на форме [`ValidationSummary`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationsummary%28v=vs.100%29.aspx), в который надо выводить красивые сообщения об ошибках. 

* Третий рубеж – [бизнес-сервер](fo_bs-wrapper.html). Он тоже нужен, так как логика может быть не только на форме и проверять её, как правило, надо всегда. Форма, в отличие от остальных потенциальных «вызывальщиков», ответ от бизнес-сервера должна преобразовать в понятный вид и показать пользователю. Для этого рекомендуется обработать отличным от стандартного образом событие сохранения объекта в методе `Save` и `SaveAndClose` через блока `try-catch`. В `catch` поймать сообщение от бизнес-сервера (желательно типизированное) и сообщить пользователю о проблемах. Это можно сделать либо через сообщение в [WebErrorBox](fa_exception-handling.html), либо отметкой на странице, либо ещё как-нибудь.

`Windows`:
По аналогии со сценарием для Web:
* Проверки [во время редактирования](fw_check-form-field-during-edit.html) на форме.
* Проверки [во время сохранения](fw_check-form-field-during-save.html) объекта.
* Проверки в [бизнес-сервере](fo_bs-wrapper.html).

{% include note.html content="Чтобы сгенерировать код формы редактирования (или списка), необходимо в свойствах класса со [стереотипом EditForm](fd_editform.html)) установить флажок `GenerateDependedForm`." %}

| Приём | Преимущества | Недостатки|
|--|--|--|
| [во время редактирования](fw_check-form-field-during-edit.html) | + позволяет оперативно сообщать пользователю о некорректности значения в каком-то поле | - не позволяет в полной мере проверять сложные взаимосвязи между полями объекта и другими объектами
| [во время сохранения](fw_check-form-field-during-save.html) | + позволяет проверять сложные взаимосвязи между полями объекта, поскольку проверка происходит единовременно | - проверка начинается только при попытке сохранения формы
| [в бизнес-сервере](fo_bs-wrapper.html) | + позволяет проверять сложные взаимосвязи между полями объекта, а также связи с другими объектами |  - проверка начинается только при попытке сохранения формы
|||

Общие замечания по реализации экранных форм редактирования можно посмотреть [здесь](fw_forms-recommendations.html).



## Итого

Самым предпочтительным вариантом является реализация проверок __на всех уровнях__.

## Сценарии доработки

* Настроить [проверку обязательности полей](fw_check-not-null-fields.html).
* Добавить ограничение числа вводимых символов для строковых контролов и допустимый диапазон для числовых контролов.
* Проставить [значения по умолчанию](fo_features-dafault-value.html).
* Добавить проверку [уникальности номеров](fo_unique-data-check.html), [диапазонов дат](fo_func-between.html).









