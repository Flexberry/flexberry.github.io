---
title: Валидация данных
sidebar: flexberry-winforms_sidebar
keywords: Flexberry Designer, Flexberry Winforms
toc: true
permalink: ru/fw_edit-form-validation.html
lang: ru
---

## Валидация данных

Валидация данных происходит в несколько этапов.

`Web`:
* Во-первых, нужны по-максимуму клиентские валидаторы (jQuery). Эти валидаторы должны блокировать отправку формы на сервер, если что-то не заполнено или заполнено неправильно (так мы снижаем нагрузку на сервер и увеличиваем отзывчивость и интерактивность приложения). Если это простой `required`, то можно использовать [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator%28v=vs.100%29.aspx|ASP.NET-валидатор) с включенным клиентским обработчиком – тогда jQuery-валидаторы не нужны. Главное правильно указать `[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.validationgroup%28v=vs.100%29.aspx|ValidationGroup)`. 


* После клиентских валидаторов нужно использовать серверные и разместить на форме `[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.validationsummary%28v=vs.100%29.aspx|ValidationSummary)`, в который надо выводить красивые сообщения об ошибках. 


* Третий рубеж – [BSExample|бизнес-сервер). Он тоже нужен, так как логика может быть не только на форме и проверять её, как правило, надо всегда. Форма, в отличие от остальных потенциальных «вызывальщиков», ответ от бизнес-сервера должна преобразовать в понятный вид и показать пользователю. Для этого рекомендуется обработать отличным от стандартного образом событие сохранения объекта в методе `Save` и `SaveAndClose` через блока `try-catch`. В `catch` поймать сообщение от бизнес-сервера (желательно типизированное) и сообщить пользователю о проблемах. Это можно сделать либо через сообщение в [WebErrorBox-and-ErrorForm|WebErrorBox), либо отметкой на странице, либо ещё как-нибудь.

`Windows`:
По аналогии со сценарием для Web:
* Проверки [во время редактирования](fw_check-form-field-during-edit.html) на форме.
* Проверки [во время сохранения](fw_check-form-field-during-save.html) объекта.
* Проверки в [бизнес-сервере](BSExample.html).

{% include note.html content="Чтобы сгенерировать код формы редактирования (или списка), необходимо в свойствах класса со [стереотипом EditForm](fd_editform.html)) установить флажок `GenerateDependedForm`." %}

| Приём | Преимущества | Недостатки|
|--|--|--|
| [во время редактирования](fw_check-form-field-during-edit.html) | + позволяет оперативно сообщать пользователю о некорректности значения в каком-то поле | - не позволяет в полной мере проверять сложные взаимосвязи между полями объекта и другими объектами
| [во время сохранения](fw_check-form-field-during-save.html) | + позволяет проверять сложные взаимосвязи между полями объекта, поскольку проверка происходит единовременно | - проверка начинается только при попытке сохранения формы
| [в бизнес-сервере](BSExample.html) | + позволяет проверять сложные взаимосвязи между полями объекта, а также связи с другими объектами |  - проверка начинается только при попытке сохранения формы
|||

Общие замечания по реализации экранных форм редактирования можно посмотреть [здесь](Реализация-пользовательского-интерфеиса-экранных-форм-редактирования.html).



## Итого

Самым предпочтительным вариантом является реализация проверок __на всех уровнях__.

## Сценарии доработки

* Настроить [проверку обязательности полей](fw_check-not-null-fields.html).
* Добавить ограничение числа вводимых символов для строковых контролов и допустимый диапазон для числовых контролов.
* Проставить [значения по умолчанию](FeaturesOfDafaultValueAssignment.html).
* Добавить проверку [уникальности номеров](BSUniqueDataCheck.html), [диапазонов дат](fo_func-between.html).









