---
title: Автодополнение в лукапе
sidebar: ember-flexberry_sidebar
keywords: Flexberry Ember
toc: true
permalink: ru/ef_lookup-autocomplete.html
lang: ru
summary: Описаны основные особенности использования лукапа в режиме автодополнения
---

## Описание

Автодополнение в [лукапе](ef_lookup.html) позволяет осуществлять ввод с клавиатуры части значения и последующий выбор из предложенных вариантов.

Чтобы перевести лукап в режим автодополнения, достаточно добавить свойство:

```hbs
{% raw %}
{{flexberry-lookup
        componentName="lookupUsers"
	choose='showLookupDialog'
	remove='removeLookupValue'
	value=model.employee1
	relationName='employee1'
	projection='EmployeeL'
	title='Employees'
	readonly=readonly
	displayAttributeName='FirstName'

	autocomplete=true
}}{% endraw %}
```

## Свойства, используемые в автодополнении

Ниже указаны основные добавленные в лукап свойства для работы автодополнения.

Свойство | Описание | Дефолтное значение
:--------------|:-----------------------------------------------------------|:-------------
`autocomplete` | Режим автокомплита, в режиме "Только для чтения" не работает | false
`minCharacters` | Минимальное количество символов для автокомпилита, в режиме автокомплита и в режиме выпадающего списка | 1
`maxResults` | Максимальное количество отображаемых записей в режиме автокомплита и в режиме в режиме выпадающего списка, не обязательное свойство | 10
`autocompleteProjection` | Имя проекции по которому считываются поля в запросе для отображения записей, не обязательное свойство используется для вычислимых полей | undefined
`autocompletePersistValue` | Флаг, определяющий оставлять или нет введенное значение при потере фокуса, если из результатов автокомплита не было выбрано никакое значение | false

## Особенности запроса к серверу за результатами автодополнения

{% include important.html content="Информация устарела, свойство limitFunction удалено, загрузка через `store`." %}

При выполнении запроса к серверу за результатами автодополнения передаются следующим образом сформированные опции:

* Максимальное количество возвращаемых значений определяется как autocompleteMaxResults.
* Накладываемое ограничение на возвращаемые значения определяются как объединение через "И" наложенной функции ограничения на лукап (limitFunction) и функции Contains.

## Наложение сортировки на скрытые поля мастера

Если возникает необходимость сортировки скрытых полей при использовании автодополнения, то следует использовать свойство `autocompleteOrder`. Для этого в шаблоне приложения необходимо добавить данное свойство с указанием полей, по которым требуется отсортировать, и направления сортировки. К примеру:

```hbs
autocompleteOrder="moderated asc, parent desc"
```

## Режим автокомплита с автоматическим выбором по введенному значению

В данном режиме:
1. При вводе в автокомплит значения, которого нет в справочнике, оно не обнуляется, но устанавливается пустая ссылка на справочник.
2. При вводе в автокомплит значения, которое есть в справочнике, устанавливается ссылка на справочник.

Это может быть полезно, если введенное в лукап значение, нужно сохранять в отдельное поле, даже если в справочнике лукапа данного значения нет.

Для включения данного режима, следует свойство `autocompletePersistValue` установить в true, а свойство `displayValue` забиндить на поле, в которое нужно сохранять отображаемое в лукапе значение.

```hbs
{% raw %}
{{flexberry-lookup
        ...

	autocomplete=true
	autocompletePersistValue=true
	displayValue=model.lookupDisplayValue
}}{% endraw %}
```
