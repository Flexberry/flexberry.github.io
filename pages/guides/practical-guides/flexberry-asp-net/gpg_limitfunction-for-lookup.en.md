---
title: Imposing restrictions on LookUp
sidebar: guide-practical-guides_sidebar
keywords: guide
toc: true
permalink: en/gpg_limitfunction-for-lookup.html
lang: en
autotranslated: true
hash: 5a5edf3650c4fe584f796b2e2189abfad48ad319223fae99bd4ff0167854454e
---

## Refinement of the model

For imposing restrictions on the list of employees needs to be clarified class diagram: introduced an enum type `Должность` and attribute `Должность` in class `Сотрудник`.

![](/images/pages/guides/flexberry-aspnet/add-class-for-limit.png)

You also need to change ideas `СотрудникL` and `СотрудникE` to attribute `Должность` hit them.
Then re-generate the objects and to align the database.

## The imposition of restrictions on LookUp

In the terminology `Flexberry` button that causes a list of choices, is called lucapa (`LookUp`).

![](/images/pages/guides/flexberry-aspnet/lookup.png)

Purpose: to restrict the list of employees to select the employee who filled the order.
In the list of employees there are employees with different positions.
On the edit form of the order by clicking on lookup need to withdraw only managers (to avoid incorrect input from the user system).

In order to specify a restriction is necessary:

1.Go to the web page `ZakazE.aspx` where to find the control `MasterEditorAjaxLookUp` and remember it `ID` (in this case `ctrlМенеджер`).

![](/images/pages/guides/flexberry-aspnet/lookup-id.png)

{% include note.html content="default for veseh forms are not generated `designer` file. In order to be able to access the control by its `ID`, you need to keep `aspx` file, this will generate `designer` file and fills the appropriate properties. Necessary controls will be declared in the code, after which they can be used." %}

2.Go to server-side code of the web page `ZakazE.aspx.cs` and change the parameter value `flexberryautogenerated` on `false`, otherwise at the next generation of the source code, your changes will be lost.

![](/images/pages/guides/flexberry-aspnet/zakaz-no-gen.png)

3.Add the following lines (to select options uses Ctrl-Space):

```csharp
using ICSSoft.STORMNET.FunctionalLanguage;
using ICSSoft.STORMNET.FunctionalLanguage.SQLWhere;
```

4.To change the method `PreApplyToControls()` file `ZakazE.aspx.cs` as follows:

```csharp
protected override void PreApplyToControls()
{
	Function lf = FunctionBuilder.BuildEquals<Сотрудник>(x => x.Должность), Должность.Менеджер);	

	ctrlМенеджер.LimitFunction = lf;
}
```

Method `PreApplyToControls()` called prior distribution of the object data to controls page. At the time of calling this method the object is already deducted from the database (or when `PostBack'e` values are already stored in the object), you can perform some additional manipulation of the object before its value gets to the page.
In the code of this method is formed by special design `LimitFunction` which allows you to impose restrictions.

5.PstrfSolution` to recompile, start the app and confirm the changes (by clicking on the button opens a list of lucapa, in which only managers).

## Go

* <i class="fa fa-arrow-left" aria-hidden="true"></i> [customize application menu for different user roles](gpg_customize-application-menu)
* [Indication of current date](gpg_date-time-now.html) <i class="fa fa-arrow-right" aria-hidden="true"></i> 


