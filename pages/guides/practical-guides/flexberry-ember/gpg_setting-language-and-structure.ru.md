---
title: Добработка модели предметной области
sidebar: guide-practical-guides_sidebar
keywords: guide, ember-flexberry, flexberry ember, flexberry designer, стадия, диаграмма классов
toc: true
permalink: ru/gpg_setting-language-and-structure.html
lang: ru
---

{% include important.html content="Данное практическое руководство является продолжением [Практического руководства по созданию UML-диаграмм](gpg_practical-guides-uml.html)." %}

Прежде, чем приступить к работе с Flexberry Ember, рассмотрим вопрос выбора языка для именования классов и прочих элементов модели предметной области.

В [практическом руководстве по Flexberry ASP.NET](gpg_preparatory-stage.html) для именования объектов данных и прочих элементов модели предметной области используется преимущественно русский язык. Данный подход удобен с точки зрения восприятия для аналитиков и разработчиков, которые работают с моделью. Однако при разработке приложений на Flexberry Ember рекомендовано использовать английский язык для именования тех элементов модели, с которыми работает разработчик.

Данное требование обусловлено не только сложившейся практикой программирования на языке JavaScript ([именование переменных в JavaScript](https://learn.javascript.ru/variables#variable-naming)), но и дополнительными особенностями при работе с Flexberry Ember. Во-первых, возможна ситуация, в которой определенный код фреймворка Ember.js может некорректно работать из-за наличия кириллицы в именах. Во-вторых, ряд браузеров могут работать нестабильно, если в серверном API присутствует кириллица. В связи с этим, прежде чем приступить к дальнейшим шагам практического руководства, давайте переведем нашу модель предметной области на английский язык.

Дополнительно с общими рекомендациями по именованию переменных на языке JavaScript можно ознакомиться [тут](https://learn.javascript.ru/variable-names).

## Копирование стадии

Для того, чтобы исходная модель, пригодная для разных практических руководств, оставалась неизменной, продублируем стадию. Для этого выполним команду "Экспорт стадии":

![Экспорт стадии](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/1.png)

Сохраним стадию локально, после чего вновь загрузим эту стадию во Flexberry Designer с использованием команды "Импорт стадии":

![Импорт стадии](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/2.png)

Сохраним копию стадии под названием **Стадия (ember)**.

## Переименование классов

В первую очередь давайте переименуем классы. Для этого откроем диаграмму классов "Сущности" и выделим класс **Заказ**. Для того, чтобы переименовать класс, требуется вызвать контекстное меню и далее выбрать пункт "Переименовать":

_`Заказ → [правая кнопка мыши (ПКМ)] → Переименовать`_

![Переименование класса](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/3.png)

Введем в появившемся поле новое имя - **Order**.

{% include important.html content="Для классов всегда используйте команду \"Переименовать\". Не пытайтесь переименовать классы путем редактирования их названия напрямую из диаграммы: таким образом переименование не сработает." %}

---

**_Самостоятельно_** переименуйте остальные классы следующим образом:

> Заказ → Order  
> СтрокаЗаказа → OrderItem  
> СостояниеЗаказа → OrderStatus  
> Накладная → Invoice  
> ЗаписьВНакладной → InvoiceItem  
> СостояниеНакладной → InvoiceStatus  
> Склад → Storehouse  
> ТоварНаСкладе → StoreProduct  
> Товар → Product  
> Сотрудник → Employee  
> Документ → Document

---

{% include warning.html content="Избегайте использование [ключевых слов языка JavaScript](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Lexical_grammar#%D0%9A%D0%BB%D1%8E%D1%87%D0%B5%D0%B2%D1%8B%D0%B5_%D1%81%D0%BB%D0%BE%D0%B2%D0%B0), а также \"стандартных\" имен из [объектной модели Ember.js](https://api.emberjs.com/ember/3.1), в качестве имен классов (например, если класс Склад назвать не Storehouse, а Store, то при запуске Ember-приложения может возникнуть конфликт с именем сервиса store из библиотеки Ember Data в соответствующих частях кода)." %}

**В результате** данного шага у вас должна получиться следующая диаграмма:

![Диаграмма с английскими именами классов](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/4.png)

Для того, чтобы в пользовательском интерфейсе приложения наименования классов сразу отображались на русском языке, требуется указать свойство Caption у класса. Для того, чтобы это сделать, выполните:

_`Order → [ПКМ] → ORM: Редактировать свойства`_

![Настройка заголовка класса](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/5.png)

Мы видим, что соответствующее имя на русском языке уже указано. Это произошло потому, что мы создавали классы именно на русском языке, и при создании классов автоматически были проставлены значения свойств "Description" И "Caption".

Если вы будете именовать классы изначально на английском языке, не забывайте указывать значение их заголовков в свойстве "Caption".

## Переименование атрибутов

Переименуем атрибуты на примере класса Order (Заказ). Для этого выполним следующие действия:

_`Order → [ПКМ] → ORM: Редактировать свойства → Атрибуты`_

В открывшемся окне изменим поля следующим образом:

![Вкладка редакирования атрибутов](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/6.png)

> Статус → Status  
> ДатаОтгрузки → ShipmentDate  
> ДатаОплаты → PaymentDate  
> Цена → TotalSum

{% include important.html content="Так как мы изменили имя перечисления \"СтатусЗаказа\" на \"OrderStatus\", мы также должны изменить тип атрибута Status в классе Order. Аналогичные изменения нужно будет сделать в классе Invoice (Накладная).
Атрибуты класса можно редактировать непосредственно на диаграмме." %}

{% include warning.html content="Если для классов ранее были определены представления, включающие переименованные атрибуты, то необходимо также исправить и соответствующие представления. Более подробно работу с представлениями мы рассмотрим в следующих разделах." %}

---

**_Самостоятельно_** переименуйте атрибуты остальных классов следующим образом:

**Order**

> Отменить() → Cancel() \*

**OrderItem**

> Количество → Amount  
> ЦенаСНалогами → PriceWTaxes  
> Сумма → TotalSum

**Invoice**

> Статус → Status  
> ДатаВремяОтгрузки → ShipmentDateTime  
> Сумма → TotalSum  
> Вес → TotalWeight  
> Примечание → Note  
> ФИОПолучателя → CustomerName  
> **Особо**: СостояниеНакладной → InvoiceStatus

**InvoiceItem**

> Количество → Amount  
> Вес → Weight  
> Цена → Price  
> Сумма → TotalSum

**Storehouse**

> Номер → Number  
> Адрес → Address

**StoreProduct**

> Количество → Amount

**Product**

> КодТовара → ProductCode  
> Название → Name  
> ЕдиницаИзмерения → Measure  
> Описание → Description  
> Цена → Price

**Employee**

> ТабельныйНомер → Number  
> Фамилия → LastName  
> Имя → FirstName  
> Отчество → MiddleName  
> Телефон → PhoneNumber  
> EMail → Email

**Document**

> Номер → Number  
> ДатаЗаполнения → CreateDate

---

_Подсказка_:  
переименовать метод можно прямо на диаграмме или на соответствующей вкладке в свойствах класса:

_`Order → [ПКМ] → ORM: Редактировать свойства → Методы`_

## Переименование ролей ассоциаций

Рядом с классом Employee (Работник) указаны наименования ролей для ассоциаций, связыающих класс Работник с другими классами, так как для разных связей роль Работника отличается. Их имена также нужно изменить:

> МатериальноОтветственноеЛицо → ResponsiblePerson  
> Кладовщик → Storekeeper  
> Менеджер → Manager

## Локализация перечислений

Классы со стереотипом "enumeration" представляют собой особый тип данных - это фиксированный набор значений, который указывается для свойств различных классов. Чтобы их переименовать, выполним следующие действия:

_`OrderStatus → [ПКМ] → ORM: Редактировать свойства → Возможные значения`_

Для внутренней работы приложения требуется в поле **Name** ввести **английские наименования**. Однако, чтобы значения перечислений отображались в приложении сразу на русском языке, перенесем **русские наименования** в столбец **Caption**:

> Новый → New  
> Оплаченный → Paid  
> Отменённый → Canceled

![Вкладка настройки перечислений](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/7.png)

---

**_Самостоятельно_** переименуйте значения остальных перечислений следующим образом:

**InvoiceStatus**

> Новая → New  
> Выписанная → Issued  
> Приостановленная → Paused  
> Готовая → Ready  
> Отгруженная → Shipped

---

## Доработка структуры модели

Внесем также дополнительные изменения в диаграмму классов, чтобы она более точно описывала предметную область:

(1) Добавим поле Weight типа double в класс Product

![Новое поле Weight в классе Product](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/8.png)

Это поле необходимо для того, чтобы описать вес единицы конкретного товара. Таким образом, вес в строке накладной может далее быть автоматически рассчитан на основании веса единицы товара и его количества.

(2) Создадим перечисление PositionList (тип enumeration) со значениями:

> Кладовщик → Storekeeper  
> Менеджер → Manager

![Добавление перечисления](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/9.png)

Далее также будем считать, что материально ответственными лицами будут являться кладовщики.

(3) Добавим поле **Position** (в значении должность) типа **PositionList** в класс Employee

![Новое поле Position типа PositionList в классе Empoyee](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/10.png)

Оно необходимо, так как конкретного сотрудника принимают на конкретную должность, и мы должны это учитывать, чтобы в дальнейшем фильтровать список сотрудников по их должности.

## Итог

В результате всех изменений диаграмма классов должна принять следующий вид:

![Итог переименования и дораоботки структуры модели](/images/pages/guides/flexberry-ember/1-setting-language-and-structure/11.png)

Нужно отметить, что перевод русских имен в модели предметной области на английский язык применяется не всегда. Такой подход применяется в том случае, когда вся команда способна вести разработку на английском языке. Если вся команде не владеет английским языком на достаточном уровне, то вместо полноценного перевода иногда используют транслитерацию, когда слова на русском языке просто пишутся латиницей, например:

`Заказ - Order - Zakaz`

Выбор способа именования устанавливается руководителем проекта или ведущим разработчиком и является единым для всей команды.

## Перейти

- [Практическое руководство «Делай как я»](gpg_landing-page.html) <i class="fa fa-arrow-up" aria-hidden="true"></i>
- [Создание представлений, классов форм и класса приложения](gpg_create-and-configure-application-structure.html) <i class="fa fa-arrow-right" aria-hidden="true"></i>
